(define (make-account balance password) 
	(define (withdraw amount) 
		(if (>= balance amount)
			(begin (set! balance (- balance amount)) balance)
			"Insufficient funds")
	) 
	(define (deposit amount)
		(set! balance (+ balance amount))
		balance)
	(define (lock-with password)
		(dispatch password)
	)
	(define (dispatch password)
		(lambda (p m)
			(if (eqv? p password)
				(cond 
					((eq? m 'withdraw) withdraw)
					((eq? m 'deposit) deposit)
					((eq? m 'share) lock-with)
					(else (error "Unknown request: MAKE-ACCOUNT" m))
				)
				(error "Incorrect password")
			)
		)
	)
	(lock-with password)
)

(define (make-joint acc p1 p2)
	((acc p1 'share) p2)
)

(define acc (make-account 100 'secret-password))
((acc 'secret-password 'withdraw) 40)
((acc 'some-other-password 'deposit) 50)

(define paul-acc
(make-joint acc 'secret-password 'rosebud))

((paul-acc 'rosebud 'withdraw) 10)